(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var s=t(2),r=t(15),c=t.n(r),o=(t(20),t(4)),u=t(3),a=t.n(u),i="/api/persons",l=function(e,n){return a.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))},j=function(e){return a.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.data}))},d=function(e){return a.a.post(i,e).then((function(e){return e.data}))},b=t(0),f=function(e){var n=e.persons;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("button",{type:"submit",onClick:function(){for(var e=n.length,t=1;t<=e;t++)console.log(n.length),j(t)},children:"Clear phonebook!"})})},h=function(e){var n=e.setFilter;return Object(b.jsxs)("div",{children:["Filter shown with: ",Object(b.jsx)("input",{onChange:function(e){n(e.target.value)}})]})},O=t(6),m=function(e){var n=e.newPerson,t=e.newNumber,s=e.persons,r=e.setPersons,c=e.setNewPerson,o=e.setNewNumber,u=e.setSuccesfullOperation;return Object(b.jsxs)("form",{onSubmit:function(){for(var e={name:n,number:t},c=!1,o=function(n){if(s[n].name!==e.name)c=!1;else if("undefined"!==typeof e.name){c=!0;var o="Person ".concat(e.name," is already added to phonebook, replace the old number with a new one?"),u=window.confirm(o);if(!0===u){console.log("listalla olevan id",s[n].id);var a=s.find((function(e){return e.id===s[n].id})),i=Object(O.a)(Object(O.a)({},a),{},{number:t});console.log("udpated perset : ",i),l(s[n].id,i).then((function(e){r(s.concat(e))}))}}},a=0;a<s.length;a++)o(a);!0!==c&&"undefined"!==typeof e.name&&(d(e).then((function(e){r(s.concat(e))})),u("Added ".concat(e.name," ")),setTimeout((function(){u(null)}),2e3)),c=!1},children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:["Name: ",Object(b.jsx)("input",{onChange:function(e){e.target.value.length>0&&c(e.target.value)}})]}),Object(b.jsxs)("p",{children:["Number: ",Object(b.jsx)("input",{onChange:function(e){o(e.target.value)}})]}),Object(b.jsx)("button",{type:"submit",children:"Add"})]}),Object(b.jsx)("ul",{})]})},p=function(e){var n=e.setErrorMessage,t=e.persons,s=function(s){var r=t.find((function(e){return e.id===s}));if("undefined"!==typeof s){var c=e.persons.filter((function(e){return e.id!==s}));j(s).then((function(n){e.setPersons(c)})).catch((function(e){n("Information of '".concat(r.name,"' has already been removed from server")),setTimeout((function(){n(null)}),5e3)}))}},r=e.persons.filter((function(n){return n.name.toLowerCase().includes(e.newFilter.toLowerCase())}));return Object(b.jsx)("div",{children:r.map((function(e){return Object(b.jsxs)("li",{className:"person",children:[e.name,"  ",e.number," ",Object(b.jsx)("button",{onClick:s.bind(undefined,e.id),children:"  delete  "})," "]},e.id)}))})},g=function(e){var n=e.message;return null===n?null:(console.log("message  ",n),Object(b.jsx)("div",{className:"error",children:n}))},x=function(e){var n=e.message;return null===n?null:(console.log("message  ",n),Object(b.jsx)("div",{className:"succesfull",children:n}))},v=function(){var e=Object(s.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(s.useState)(),u=Object(o.a)(c,2),i=u[0],l=u[1],j=Object(s.useState)(),d=Object(o.a)(j,2),O=d[0],v=d[1],w=Object(s.useState)(""),N=Object(o.a)(w,2),P=N[0],S=N[1],y=Object(s.useState)(null),C=Object(o.a)(y,2),k=C[0],F=C[1],E=Object(s.useState)(null),M=Object(o.a)(E,2),A=M[0],I=M[1];return Object(s.useEffect)((function(){a.a.get("/api/persons").then((function(e){r(e.data)}))}),[]),Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Phonebook:"}),Object(b.jsx)(g,{message:k}),Object(b.jsx)(x,{message:A}),Object(b.jsx)(h,{setFilter:S}),Object(b.jsx)("h1",{children:"Add a new:"}),Object(b.jsx)(m,{persons:t,setPersons:r,newPerson:i,setNewPerson:l,newNumber:O,setNewNumber:v,errorMessage:k,setErrorMessage:F,succesfullOperation:A,setSuccesfullOperation:I}),Object(b.jsx)("h2",{children:"Numbers:"}),Object(b.jsx)(p,{setPersons:r,newFilter:P,persons:t,errorMessage:k,setErrorMessage:F}),Object(b.jsx)("p",{children:"---------------------------------------"}),Object(b.jsx)(f,{persons:t,setPersons:r,newPerson:i,setNewPerson:l,newNumber:O,setNewNumber:v})]})};c.a.render(Object(b.jsx)(v,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.2b802c88.chunk.js.map