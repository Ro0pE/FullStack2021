(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var s=t(2),r=t(15),o=t.n(r),c=(t(20),t(4)),a=t(3),u=t.n(a),i="/api/persons",l=function(e,n){return u.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))},d=function(e){return u.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.data}))},j=function(e){return u.a.post(i,e).then((function(e){return e.data}))},b=t(0),f=function(e){var n=e.persons;return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("button",{type:"submit",onClick:function(){for(var e=n.length,t=1;t<=e;t++)d(t)},children:"Clear phonebook!"})})},h=function(e){var n=e.setFilter;return Object(b.jsxs)("div",{children:["Filter shown with: ",Object(b.jsx)("input",{onChange:function(e){n(e.target.value)}})]})},m=t(6),O=function(e){var n=e.newPerson,t=e.newNumber,s=e.persons,r=e.setPersons,o=e.setNewPerson,c=e.setNewNumber,a=e.setSuccesfullOperation;console.log("skulaako t\xe4\xe4 skeida olleskaan en\xe4\xe4");return Object(b.jsxs)("form",{onSubmit:function(){for(var e={name:n,number:t},o=!1,c=function(n){if(s[n].name!==e.name)o=!1;else if("undefined"!==typeof e.name){o=!0;var c="Person ".concat(e.name," is already added to phonebook, replace the old number with a new one?"),a=window.confirm(c);if(!0===a){console.log("listalla olevan id",s[n].id);var u=s.find((function(e){return e.id===s[n].id})),i=Object(m.a)(Object(m.a)({},u),{},{number:t});console.log("udpated perset : ",i),l(s[n].id,i).then((function(e){r(s.map((function(t){return t.id!==s[n].id?t:e})))}))}}},u=0;u<s.length;u++)c(u);!0!==o&&"undefined"!==typeof e.name&&(j(e).then((function(e){r(s.concat(e))})).catch((function(e){console.log("VIRHGE PKRL"),console.log(e.response.data)})),a("Added ".concat(e.name," ")),setTimeout((function(){a(null)}),2e3)),o=!1},children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:["Name: ",Object(b.jsx)("input",{onChange:function(e){e.target.value.length>0&&o(e.target.value)}})]}),Object(b.jsxs)("p",{children:["Number: ",Object(b.jsx)("input",{onChange:function(e){c(e.target.value)}})]}),Object(b.jsx)("button",{type:"submit",children:"Add"})]}),Object(b.jsx)("ul",{})]})},p=function(e){var n=e.setErrorMessage,t=e.persons,s=function(s){var r=t.find((function(e){return e.id===s}));if("undefined"!==typeof s){var o=e.persons.filter((function(e){return e.id!==s}));d(s).then((function(n){e.setPersons(o)})).catch((function(e){n("Information of '".concat(r.name,"' has already been removed from server")),setTimeout((function(){n(null)}),5e3)}))}},r=e.persons.filter((function(n){return n.name.toLowerCase().includes(e.newFilter.toLowerCase())}));return Object(b.jsx)("div",{children:r.map((function(e){return Object(b.jsxs)("li",{className:"person",children:[e.name,"  ",e.number," ",Object(b.jsx)("button",{onClick:s.bind(undefined,e.id),children:"  delete  "})," "]},e.id)}))})},g=function(e){var n=e.message;return null===n?null:(console.log("message  ",n),Object(b.jsx)("div",{className:"error",children:n}))},x=function(e){var n=e.message;return null===n?null:(console.log("message  ",n),Object(b.jsx)("div",{className:"succesfull",children:n}))},v=function(){var e=Object(s.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],o=Object(s.useState)(),a=Object(c.a)(o,2),i=a[0],l=a[1],d=Object(s.useState)(),j=Object(c.a)(d,2),m=j[0],v=j[1],w=Object(s.useState)(""),N=Object(c.a)(w,2),P=N[0],k=N[1],S=Object(s.useState)(null),y=Object(c.a)(S,2),C=y[0],E=y[1],F=Object(s.useState)(null),M=Object(c.a)(F,2),A=M[0],I=M[1];return Object(s.useEffect)((function(){u.a.get("/api/persons").then((function(e){r(e.data)}))}),[]),Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Phonebook:"}),Object(b.jsx)(g,{message:C}),Object(b.jsx)(x,{message:A}),Object(b.jsx)(h,{setFilter:k}),Object(b.jsx)("h1",{children:"Add a new:"}),Object(b.jsx)(O,{persons:t,setPersons:r,newPerson:i,setNewPerson:l,newNumber:m,setNewNumber:v,errorMessage:C,setErrorMessage:E,succesfullOperation:A,setSuccesfullOperation:I}),Object(b.jsx)("h2",{children:"Numbers:"}),Object(b.jsx)(p,{setPersons:r,newFilter:P,persons:t,errorMessage:C,setErrorMessage:E}),Object(b.jsx)("p",{children:"---------------------------------------"}),Object(b.jsx)(f,{persons:t,setPersons:r,newPerson:i,setNewPerson:l,newNumber:m,setNewNumber:v})]})};o.a.render(Object(b.jsx)(v,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.cc098760.chunk.js.map